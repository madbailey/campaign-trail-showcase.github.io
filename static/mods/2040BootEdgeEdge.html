//Code1
campaignTrail_temp.election_json = [
    {
        "model": "campaign_trail.election",
        "pk": 20,
        "fields": {
            "year": 2016,
            "display_year": "2040",
            "summary": "<div><p>Donald Trump is dead. Bernie Sanders is dead. And now we are all forced to live in the hell they left behind.</p><p>After a decisive win in the 2036 election, Democrats didn't have long to celebrate their fifth consecutive White House victory. The nation snapped. The right wing terror cells that had been lurking in the shadows came out in full force. In broad daylight, at a church in Atlanta, President-Elect Raphael Warnock was gunned down. He never even took the oath.</p><p> <b> It. Is.<span class=\"shake\"> Happening</span>. </b> Afghanistan- on our doorstep.</p> <p> Now, the presidency falls to Pete Buttigieg, and even his own party doubts he has the strength to lead the nation through this chaos. Despite the insurgency’s widespread unpopularity, Brian Kemp—a sympathizer and appeaser—has a real chance of winning the White House. If Buttigieg is to survive, the mission is clear: unite the party, crush the insurgents, and restore order before the next election.</p> There can be no doubt about who holds the reigns of power. <br> <span class=\"fiery-effect\">No more doubters.</span></p></div>",
            "image_url": "https://d1y822qhq55g6.cloudfront.net/default/_superImage/911_Image_Getty_Web.jpg",
            "winning_electoral_vote_number": 272,
            "advisor_url": "https://fordschool.umich.edu/sites/default/files/styles/open_graph/public/2023-09/chasten-buttigieg-extended-1090x681.jpg",
            "recommended_reading": "<div style='text-align: center;'><a href='https://2009-2017.state.gov/documents/organization/119629.pdf' class='flashing-text' style='font-size: 20px;'>Official Guide</a></div><style>@keyframes flash { 0% { color: rgb(255, 234, 0); } 33% { color: red; } 66% { color: black; } 100% { color: rgb(236, 244, 15); } } .flashing-text { font-weight: bold; animation: flash 2s infinite; }</style>",
            "has_visits": 1,
            "creator": "Dan Bryan",
            "no_electoral_majority_image": "https://i.imgur.com/5gdezUv.png"
        }
    }
]

// Get the inner window element
const innerWindow = document.querySelector('#inner_window_1');
if (innerWindow) {
    // Store the existing start button if it exists
    const existingStartButton = innerWindow.querySelector('#game_start');
    
    // Clear existing content, but keep the start button if it exists
    innerWindow.innerHTML = '';
    if (existingStartButton) {
        innerWindow.appendChild(existingStartButton);
    }

    // Add the h3 title
    const title = document.createElement('h3');
    title.textContent = '       Do you have what it takes to SAVE OUR REPUBLIC?';
    title.style.marginLeft = '32px';
    title.style.textAlign = 'center';
    title.style.fontSize = '32px';
    innerWindow.insertBefore(title, innerWindow.firstChild);

    // Create a container for the image and list
    const container = document.createElement('div');
    container.style.display = 'flex';
    container.style.alignItems = 'flex-start';

    // Create an image container
    const imgContainer = document.createElement('div');
    imgContainer.style.width = '200px';
    imgContainer.style.flexShrink = '0';
    imgContainer.style.marginRight = '0px';
    imgContainer.style.marginLeft = '20px';

    // Add the image
    const img = document.createElement('img');
    img.src = 'https://i.postimg.cc/zvqr9cL3/mayor-pete.png';
    img.alt = 'Combat Obscura';
    img.style.width = '100%';
    img.style.maxWidth = '400px';
    imgContainer.appendChild(img);

    container.appendChild(imgContainer);

    // Create a text container
    const textContainer = document.createElement('div');
    textContainer.style.flex = '1';

    // Create and add the list
    const list = document.createElement('ul');
list.style.margin = '0';
list.style.paddingLeft = '20px';
list.style.textAlign = 'left'; // Ensure left alignment


    const newItems = [
        'Welcome to The Campaign Trail: Boot-Edge-Edge- an alternate future political strategy game with dating sim elements.',
        'You play as Pete Buttigieg, and will guide him through the end of his first term as president and, hopefully, to re-election.',
        'You will orchestrate his campaign and military strategy, as well as his efforts to rekindle his dying marriage.',
        'The answers will affect his popularity: nationally, in individual states, as well as with his husband Chasten.',
        'Choose carefully- as the choices you make will affect the questions you are given later on.',
        'Content Warning: This game contains themes of war, brutality, and sensitive details of a homosexual male relationship.'
    ];
    
    newItems.forEach(item => {
        const li = document.createElement('li');
        li.textContent = item;
        li.style.textAlign = 'left'; // Explicitly set left alignment for each list item
        list.appendChild(li);
    });
        

    textContainer.appendChild(list);
    container.appendChild(textContainer);
    innerWindow.insertBefore(container, existingStartButton);

    // If the start button didn't exist before, create it
    if (!existingStartButton) {
        const startButton = document.createElement('button');
        startButton.id = 'game_start';
        startButton.innerHTML = '<strong>Click here to begin!</strong>';
        startButton.style.display = 'block';
        startButton.style.margin = '20px auto 0';
        innerWindow.appendChild(startButton);
    }
}

campaignTrail_temp.modBoxTheme = {
  "header_color": "#1d253c",
  "header_text_color": "#f5f3f4",
  "description_text_color": "#000000",
  "description_background_color": "#f5f3f4",
  "main_color": "#1d253c",
  "secondary_color": "#19191E",
  "ui_text_color": "#FFFFFF"
}

campaignTrail_temp.candidate_json = [
    {
        "model": "campaign_trail.candidate",
        "pk": 41733,
        "fields": {
            "first_name": "Pete",
            "last_name": "Buttigieg",
            "election": 20,
            "party": "Democratic",
            "state": "Michigan",
            "priority": 1,
            "description": "<p>There is an idea of a Pete Buttigieg, some kind of abstraction, but there is no <i>real</i> Pete Buttigieg. Underneath a patina of Midwestern optimism there is a man haunted by visions of greatness. Since his time as mayor of South Bend, Pete has recalibrated, reinvented himself half a dozen times. The Rhodes Scholar, the veteran, the midwest governor who helped revitalize a city synonymous with failure - each role carefully crafted, each stumble transmuted into a stepping stone.</p><p> Now fate has handed him the keys to the kingdom through the tragedy of Warnock's assassination. This is his <b>Lincoln moment</b>. His chance to stand astride the chasm of a divided nation. To pull it back from the brink. But his drive to matter, to leave an indelible mark, may also prove to be his undoing. </p>",
            "color_hex": "#004d80",
            "secondary_color_hex": null,
            "is_active": 1,
            "image_url": "https://i.postimg.cc/7ZJqgRH1/buttigiegportrait.png",
            "electoral_victory_message": "",
            "electoral_loss_message": "",
            "no_electoral_majority_message": "",
            "description_as_running_mate": null,
            "candidate_score": 1,
            "running_mate": false
        }
    },
    {
      "model": "campaign_trail.candidate",
      "pk": 41993,
      "fields": {
          "first_name": "Mr.",
          "last_name": "Fetterman",
          "election": 20,
          "party": "War Democrat",
          "state": "Tel Aviv",
          "priority": 1,
          "description": "",
          "color_hex": "#00FF80",
          "secondary_color_hex": null,
          "is_active": 0,
          "image_url": "https://i.postimg.cc/7ZJqgRH1/buttigiegportrait.png",
          "electoral_victory_message": "",
          "electoral_loss_message": "",
          "no_electoral_majority_message": "",
          "description_as_running_mate": null,
          "candidate_score": 1,
          "running_mate": false
      }
  },
  {
    "model": "campaign_trail.candidate",
    "pk": 41791,
    "fields": {
        "first_name": "Lee",
        "last_name": "Zeldin",
        "election": 20,
        "party": "Republican",
        "state": "New Jersey",
        "priority": 1,
        "description": "",
        "color_hex": "#d34e23",
        "secondary_color_hex": null,
        "is_active": 0,
        "image_url": "https://i.postimg.cc/7ZJqgRH1/buttigiegportrait.png",
        "electoral_victory_message": "",
        "electoral_loss_message": "",
        "no_electoral_majority_message": "",
        "description_as_running_mate": null,
        "candidate_score": 1,
        "running_mate": false
    }
},
{
  "model": "campaign_trail.candidate",
  "pk": 41993,
  "fields": {
      "first_name": "Mr",
      "last_name": "Libertarian",
      "election": 20,
      "party": "Libertarian",
      "state": "Utah",
      "priority": 1,
      "description": "",
      "color_hex": "#FF0F00",
      "secondary_color_hex": null,
      "is_active": 0,
      "image_url": "https://i.postimg.cc/7ZJqgRH1/buttigiegportrait.png",
      "electoral_victory_message": "",
      "electoral_loss_message": "",
      "no_electoral_majority_message": "",
      "description_as_running_mate": null,
      "candidate_score": 1,
      "running_mate": false
  }
},
    {
        "model": "campaign_trail.candidate",
        "pk": 41921,
        "fields": {
            "first_name": "Abigail",
            "last_name": "Spanberger",
            "election": 20,
            "party": "Democratic",
            "state": "Virginia",
            "priority": 1,
            "description": "<p>Put description here</p>",
            "color_hex": "#2f2f6a",
            "secondary_color_hex": null,
            "is_active": 0,
            "image_url": "https://i.postimg.cc/VLwb9Rwp/photo-3.jpg",
            "electoral_victory_message": "",
            "electoral_loss_message": "",
            "no_electoral_majority_message": "",
            "description_as_running_mate": "<div><p>Spanberger <i>knows</i> terror.</p><p>Her years in the CIA were spent dismantling the same kind of insurgencies now setting America’s heartland ablaze. When she upset the political order with her House win, it wasn't just a victory; it was a blueprint, reshaping the Democratic Party in her image: tough, unyielding, and ruthless. As Governor of Virginia, Spanberger didn’t just govern—she fortified. While leaders in other blue states wrung their hands and let chaos spread, Spanberger built a bulwark against extremism. Take a drive through Shenandoah: peaceful, orderly. Now try that in rural Illinois or Washington, where spineless governance has turned highways into warzones.</p><p>Spanberger doesn’t negotiate with terrorists; she eradicates them. But there’s always a cost. Whispers of her heavy-handed tactics and trampling of civil liberties are hard to ignore. To Buttigieg, though, that’s a price worth paying—as long as she delivers victories in the field and keeps the War Democrats in line.</p></div>",
            "candidate_score": 1,
            "running_mate": true
        }
    }
]

campaignTrail_temp.running_mate_json = [
    {
        "model": "campaign_trail.running_mate",
        "pk": 20,
        "fields": {
            "candidate": 41733,
            "running_mate": 41921 
        }
    }
]

campaignTrail_temp.credits = "<button onclick='credits()'>MANY PEOPLE</button>"

credits = function() {
  credits = [ "Made by Dog Lover with some help from my girlfriend. Design work was done using American Carnage as reference- thanks to Thatchmaster, Accurate_Feature9970, and Obummer, and anyone else who may have helped with coding that."]
  text = "CREDITS:"
  for (i in credits) {
      text += credits[i] 
  }
  alert(text)
}

document.styleSheets[0].insertRule(`
  #inner_window_1 {
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      height: 100vh;
      text-align: center;
  }
`, 0);

document.styleSheets[0].insertRule(`
  #inner_window_1 ul {
      list-style-type: none;
      padding: 0;
      margin: 0 0 2em 0;
  }
`, 0);

campaignTrail_temp.global_parameter_json[0].fields.question_count = 25

campaignTrail_temp.temp_election_list = [
    {
        "id": 20,
        "year": 2016,
        "is_premium": 0,
        "display_year": "2040"
    }
]

campaignTrail_temp.opponents_default_json = [
    {
        "election": 20,
        "candidates": [
        41849, 41791 
        ]
    }
]

campaignTrail_temp.opponents_weighted_json = [
    {
        "election": 20,
        "candidates": [
        41849, 41791 
        ]
    }
]

 //#startcode
  
  
  
  
  corrr = `
  <div style="font-size: 11px; font-family: monospace; color: white;">
    <h2 style="font-style: normal;">
      <img src="https://i.postimg.cc/5tNYQC0h/TOPBANNER.png" alt="BOOT EDGE EDGE" style="margin: 5px;">
    </h2>
  </div>
  `;
  
  
          nct_stuff.themes[nct_stuff.selectedTheme].coloring_window = "#d8dadc" 
          nct_stuff.themes[nct_stuff.selectedTheme].coloring_title = "#1d253c" 
          $(".container")[0].style.backgroundColor = "#1d253c"
          $(".container")[0].style.backgroundSize = "120% auto"
          $("#game_window")[0].style.backgroundColor = "#FFFFFF" 
          $('#game_window')[0].style.border = "0px"
          document.body.background = "https://i.postimg.cc/tCSwnjYg/mayor-pete.png" 
          document.body.style.backgroundSize = "99.4% auto"
          document.getElementById("header").src = "https://i.postimg.cc/TPW2qNcv/finalbanner.png"
          document.getElementById("wittyquote").color = "red" 
          nct_stuff.themes[nct_stuff.selectedTheme].text_col = "white"
          document.head.innerHTML += "<style>#results_container {color:#ffffff;} .inner_window_w_desc {background-color:#ffffff !important;}</style>";
          
          quotes = [""]
          customquote = quotes[Math.floor((Math.random() * quotes.length))]
  
  
  
  
  
  e = campaignTrail_temp
  
  document.head.innerHTML += `
  <style>
     .shake {
    display: inline-block;
    animation: shake 7s ease-in-out infinite;
  }

@keyframes shake {
    0% { transform: translate(0.5px, 0.5px) rotate(0deg); }
    10% { transform: translate(-0.3px, -0.5px) rotate(-0.5deg); }
    20% { transform: translate(-1px, 0px) rotate(0.5deg); }
    30% { transform: translate(0.5px, 1px) rotate(0deg); }
    40% { transform: translate(0.3px, -0.5px) rotate(0.5deg); }
    50% { transform: translate(-0.3px, 0.5px) rotate(-0.5deg); }
    60% { transform: translate(-0.5px, 0.1px) rotate(0deg); }
    70% { transform: translate(0.5px, 0.3px) rotate(-0.5deg); }
    80% { transform: translate(-0.1px, -0.1px) rotate(0.5deg); }
    90% { transform: translate(0.5px, 1px) rotate(0deg); }
    100% { transform: translate(0.5px, -1px) rotate(-0.5deg); }
}
@keyframes grow-shrink {
  0% { transform: scale(1); }          /* Original size */
  25% { transform: scale(1.05); }      /* Slightly larger */
  50% { transform: scale(1); }         /* Back to original size */
  75% { transform: scale(0.95); }      /* Slightly smaller */
  100% { transform: scale(1); }        /* Back to original size */
}
.grow-shrink-effect {
  display: inline-block;
  animation: grow-shrink 2s ease-in-out infinite;
}

@keyframes fire-flicker {
    0% { color: #ff6347; text-shadow: 0 0 3px #ff8c00; }
  25% { color: #ff7f50; text-shadow: 0 0 4px #ffa500; }
  50% { color: #ff8c00; text-shadow: 0 0 5px #ff7f50; }
  75% { color: #ffa500; text-shadow: 0 0 4px #ff6347; }
  100% { color: #ff6347; text-shadow: 0 0 3px #ff8c00; }
}

.fiery-effect {
font-weight: bold;
  font-size: 1.1em;
  animation: fire-flicker 8s infinite alternate;
}
#credits {
    position: absolute;
    bottom: 10px;
    right: 10px;
    margin: 0;
    padding: 5px;
    font-size: 0.9em;
}
#question_form label {
    font-size: 1em !important; /* Adjust as needed */
    line-height: 1.2;
}
.person_summary {
  padding-top: 0em;

}
.inner_window_question h3 {
    margin: 0.5em 1em .5em;
    border: 1px solid;
    border-color: #c9c9c9;
    background: url('https://i.imgur.com/Dz6LJNI.png');
}
.content_single p {
    line-height: 1.14em;
    margin-bottom: 1.44em;
}
#answer_select_button, #view_electoral_map {
    margin: 0 40px;
    border-radius: 50px;
}
  h3 {
    font-size: 1.225em !important;
    line-height: 17px;
  }
  .inner_window_sign_display {
    border: 0px;
    height: 25% !important;
    background-color: white;
  }
  button {
    padding: 4px 6px; /* A bit more padding for a sturdier feel */
    font-size: 1em;
    font-family: 'Agency FB', sans-serif !important ; /* looks like 2020 campaign */
    border-radius: 3px; /* Minimal rounding for sharper edges */
    background-color: #f2ba42; /* Dark, military-style background color */
    color: #1d253c; /* Light, contrasting text color */
    border: 2px solid #f2e4d6; /* Thin, sharp border using the highlight color */
    cursor: pointer; /* Standard pointer on hover */
    transition: all 0.2s ease-in-out; /* Subtle transition */
    text-transform: uppercase; /* Give the text an authoritative look */
}
#answer_select_button, #view_electoral_map {
    margin: 0 40px;
    border-radius: 50px;
    padding: 0px 5px;
    font-weight: 600;
    font-size: 14px;
    /* width: auto; */
}
.footer {
    border: 0px;
    padding: 0;
}
.content_single {
  border: 0px;
}
.game_header h2 {
  font-size: 1em;
}
button:hover {
    background-color: #1d253c; /* Highlight on hover, using the gold tone */
    color: #f2ba42; /* Dark text to contrast the lighter background */
    border-color: #f2e4d6; /* Keep the border the same color */
}

button:active {
    background-color: #1d253c; /* A light press color for a distinct click effect */
    color: #f2ba42; /* Dark text to maintain contrast */
    border-color: #f2e4d6; /* Keep the border */
    transform: translateY(1px); /* Subtle press-in effect */
}
#menu_container {
    background-color: rgb(255, 255, 255) !important;
}
#answer_select_button {
  margin-top: 0em;
}
#overall_result, #state_info {
    background-image: url('https://imgur.com/9I0ZuwN.png');
    background-size: cover;
    background-position: center;
    background-blend-mode: lighten;
    background-color: rgba(255, 255, 255, 0.75); /* Adds a soft white tint to blend with the background */
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Adds a soft shadow for a polished effect */
}
#overall_result h3, #state_info h3, #state_result h3 {
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.2); /* Adds a subtle shadow for contrast */
    padding: 0.2em 0.4em; /* Slightly increase padding */
}
#menu_container{ background-color:#fff !important;}
#candidate_pic, #running_mate_pic {
  margin-top: -0.5em;
  border-radius: 10px;
  display: inline-block; /* Ensure they behave like inline elements */
  border-style: groove;
  height: 25% !important;
}
#overall_result_container {
  background: none;
}
#menu_container h3 {
  background: white;
  border: 0px;
}
#state_info p {
    text-align: center;
    margin: .5em 0;
    font-weight: 700;
}
#overall_result_container button {
    padding: 0px 15px;
    /* font-family: monospace; */
    width: 70%;
    height: 20%;
    font-size: 0.8em;
}
  label {
    font-size: 0.9em !important; 
    font-family: Arial, "Helvetica Neue", Helvetica, sans-serif !important;
    line-height: 1.0; 
  }
  input {
    font-size: 0.9em !important; 
    line-height: 17px; 
  }
  .campaign_trail_start_emphasis {
    height: 0;
    width:0;
  }
  .inner_window_w_desc {
    border: 0px;
  }
#game_window {
    max-width: auto; /* Reduce max-width to give it a tighter fit */
    margin: 0em;
}
#election_summary {
    padding: 0.1em 1.5em !important;
    margin: 0 !important;
    text-align: justify;
    background: #f4f4f4;
    border: 1px solid #a9a9a9;
    word-spacing: 0.2px;
}
#content-box {
    border: 0px !important;
    margin: 0px;
}
#content-single {
    border: 0px !important;
    margin: 0px;
}

#map_container {
    background-image: url('https://imgur.com/9I0ZuwN.png'); 
}
#menu_container {
  background: none;
}
  /* Add custom styles for #election_description_window */
  #election_description_window {
    height: 50% !important; /* Set specific height */
    margin: 0.1em;
    border: 0px;
    background-color: transparent;
  }
  #election_id_button {
    margin-top: 3.5em;
}

#status-bar-container {
    display: flex;
    justify-content: space-around;
    align-items: center;
    padding: 10px;
    background-color: #1d253c;
    color: white;
    font-family: 'Agency FB', Arial, sans-serif;
    font-size: 14px;
    position: relative; /* Position within document flow */
    margin: auto;
    width: 100%; /* Full width so it doesn't expand its parent */
}

.overlay_window {
    background-color: #1d253c;
    border: 2px solid #3a4b6b;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    color: black;
    font-family: 'Agency FB', Arial, sans-serif;
    max-width: 600px;
    margin: 20px auto;
    overflow: hidden;
}
div#visit_buttons button {
    font-size: 15px;
    border-radius: 10px;
    background-color: white;
    border: 1px solid black;
    width: 170px;
}
#visit_window {
    background: url(https://i.imgur.com/Dz6LJNI.png);
    border: 3px solid #5b5b5b;
    border-radius: 8px;
    box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
    
}
#visit_content {
    height: auto;
    min-height: 76%;
    font-weight: 400;
}
#visit_content p {
  font-size: 15px;
}

/* Ensure the rest of the page content stays in place */
body {
    margin-top: 50px; /* Adjust this value to the height of your status bar */
}
  </style>`;

let contentBox = document.getElementsByClassName("content_box")[0];
let contentSingle = document.getElementsByClassName("content_single")[0];
let containerRef = document.getElementsByClassName("container")[0];

function addDynamicCSS() {
  var css = `
    .mytooltip {
      position: relative;
      display: inline-block;
      cursor: help;
      border-bottom: 1px dotted #0645ad;
      color: #0645ad;
    }

    .mytooltip .mytooltiptext {
      width: 300px;
      background-color: #ffffff;
      color: #202122;
      text-align: left;
      border-radius: 2px;
      padding: 10px;
      position: absolute;
      z-index: 99;
      top: 125%;
      left: 50%;
      transform: translateX(-50%);
      opacity: 0;
      visibility: hidden;
      transition: opacity 0.3s, visibility 0.3s;
      box-shadow: 0 1px 5px rgba(0,0,0,0.2);
      border: 1px solid #a2a9b1;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Lato', 'Helvetica', 'Arial', sans-serif;
      font-size: 14px !important;
      line-height: 1.6 !important;
    }

    .mytooltip .mytooltiptext::before {
      content: '';
      position: absolute;
      bottom: 100%;
      left: 50%;
      margin-left: -5px;
      border-width: 5px;
      border-style: solid;
      border-color: transparent transparent #a2a9b1 transparent;
    }

    .mytooltip .mytooltiptext h4 {
      margin: 0 0 8px 0;
      padding-bottom: 5px;
      border-bottom: 1px solid #a2a9b1;
      font-size: 16px;
      font-weight: normal;
      color: #000000;
    }

    .mytooltip .mytooltiptext p {
      margin: 0 0 8px 0;
    }

    .mytooltip .mytooltiptext img {
      max-width: 100%;
      height: auto;
      margin-bottom: 8px;
    }

    .mytooltip:hover .mytooltiptext {
      opacity: 1;
      visibility: visible;
    }
  `;

  var styleElem = document.createElement('style');
  styleElem.type = 'text/css';
  styleElem.appendChild(document.createTextNode(css));
  document.head.appendChild(styleElem);
}

addDynamicCSS();



  
  RecReading=true
  
  class Song {
    constructor(title, artist, coverLink, audioLink) {
      this.title = title;
      this.artist = artist;
      this.coverLink = coverLink;
      this.audioLink = audioLink;
    }
    getTitle() {
      return this.title;
    }
  
    getArtist() {
      return this.artist;
    }
  
    getCoverLink() {
      return this.coverLink;
    }
  
    getAudioLink() {
      return this.audioLink;
    }
  }
  
  class Playlist {
    constructor() {
      this.songs = [];
      this.currentSongIndex = 0;
    }
  
    addSong(song) {
      this.songs.push(song);
    }
  
    getCurrentSong() {
      return this.songs[this.currentSongIndex];
    }
  
    playNext() {
      this.currentSongIndex = (this.currentSongIndex + 1) % this.songs.length;
    }
  
    playPrevious() {
      this.currentSongIndex = (this.currentSongIndex - 1 + this.songs.length) % this.songs.length;
    }
  }
  window.Playlist=Playlist
  window.Song=Song
  
  function changePlaylist(newPlaylist) {
    playlist = newPlaylist;
    playlist.currentSongIndex = 0;
    updateUI(playlist);
    const audio = document.getElementById("audio");
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
  }
  window.changePlaylist=changePlaylist

  function updateUI(playlist) {
    const currentSong = playlist.getCurrentSong();
    player.querySelector("#cover").src = currentSong.getCoverLink();
    document.getElementById("song-info").textContent = `${currentSong.title} - ${currentSong.artist}`;
    
    // Reset progress bar
    const progressBar = document.getElementById("progress-bar");
    if (progressBar) {
      progressBar.value = 0;
    }
  }
  
  window.updateUI=updateUI
  
  
  function setupMusicPlayer() {
    playlist = new Playlist();
  
  
    const song1 = new Song(
      "More of the Same",
      "Vatican Shadow",
      "https://f4.bcbits.com/img/a3454551994_65.png",
      "https://audio.jukehost.co.uk/1umOxCmzeFbfPYIXjQiwqrQz6keguZP2"
    );
    
    const song2 = new Song(
      "Born This Way",
      "Lady Gaga",
      "https://m.media-amazon.com/images/I/81s+i2hv-eL._UF1000,1000_QL80_.jpg",
      "https://audio.jukehost.co.uk/DsAlX2cEfYXq1znrPhXDoGEbvHoi0eU2"
    );

    const song3 = new Song(
        "Boom Clap",
        "Charli XCX",
        "https://upload.wikimedia.org/wikipedia/commons/1/12/CharlieXCX-Sucker-BratStyleCover.png",
        "https://audio.jukehost.co.uk/LSFTAUVIRsLPHkFRwIt1eFhn9snU2bUF"
      );

    const song4 = new Song(
      "Where is the Love?",
      "Black Eyed Peas",
      "https://upload.wikimedia.org/wikipedia/en/a/a1/Whereisthelove_cover.jpg",
      "https://audio.jukehost.co.uk/rFJaMP7Ri0etGxLATuTfc8CecQbibNgf"
    );
  
    const song5 = new Song(
      "The Night Has Opened My Eyes",
      "The Smiths",
      "https://upload.wikimedia.org/wikipedia/en/1/15/HatfulofHollow84.jpg",
      "https://audio.jukehost.co.uk/OlYa0nSAXEI8oX6Y2aloUnKBPFdqMN6R"
    );
  
    const song6 = new Song(
      "Boy Problems",
      "Carly Rae Jepsen",
      "https://upload.wikimedia.org/wikipedia/en/d/d6/Carly_Rae_Jepsen_-_Emotion.png",
      "https://audio.jukehost.co.uk/Iw13aJzIxprLzUQyy7uKkvI5Px4ErljB"
    );
  
    const song7 = new Song(
      "Not Afraid",
      "Eminem",
      "https://upload.wikimedia.org/wikipedia/en/6/60/Recovery_Album_Cover.jpg",
      "https://audio.jukehost.co.uk/eG2a4yigVDBK9YbBFq7pFw48jogQ28UH"
    );
  
    const song8 = new Song(
      "Everlong",
      "Foo Fighters",
      "https://www.musicroom.com/product/image/medium/dam329753_0.jpg",
      "https://audio.jukehost.co.uk/6fY8Y4kDoeuvoaUU1GI6MWyyTNTo91PC"
    );
  
    playlist.addSong(song1);
    playlist.addSong(song2);
    playlist.addSong(song3);
    playlist.addSong(song4);
    playlist.addSong(song5);
    playlist.addSong(song6);
    playlist.addSong(song7);
    playlist.addSong(song8);
  
    const playerContainer = document.createElement("div");
  playerContainer.id = "player";

  const displayBox = document.createElement("div");
  displayBox.id = "display-box";

  const coverElement = document.createElement("img");
  coverElement.id = "cover";
  displayBox.appendChild(coverElement);

  playerContainer.appendChild(displayBox);

  const controlsContainer = document.createElement("div");
  controlsContainer.id = "controls-container";

  const controls = document.createElement("div");
  controls.id = "controls";

  const prevButton = document.createElement("img");
  prevButton.id = "prevButton";
  prevButton.src = "https://i.imgur.com/imIqTEA.png";
  prevButton.alt = "Previous";
  controls.appendChild(prevButton);

  const playPauseButton = document.createElement("img");
  playPauseButton.id = "playPauseButton";
  playPauseButton.src = "https://i.imgur.com/oQbfTxw.png";
  playPauseButton.alt = "Play/Pause";
  controls.appendChild(playPauseButton);

  const nextButton = document.createElement("img");
  nextButton.id = "nextButton";
  nextButton.src = "https://i.imgur.com/7TtaN04.png";
  nextButton.alt = "Next";
  controls.appendChild(nextButton);

  controlsContainer.appendChild(controls);

  const progressBarContainer = document.createElement("div");
  progressBarContainer.id = "progress-bar-container";

  const progressBar = document.createElement("progress");
  progressBar.id = "progress-bar";
  progressBar.value = "0";
  progressBar.max = "100";

  progressBarContainer.appendChild(progressBar);

  const songInfoContainer = document.createElement("div");
  songInfoContainer.id = "song-info-container";

  const songInfo = document.createElement("div");
  songInfo.id = "song-info";

  songInfoContainer.appendChild(songInfo);

  controlsContainer.appendChild(progressBarContainer);
  controlsContainer.appendChild(songInfoContainer);

  playerContainer.appendChild(controlsContainer);

  const volumeContainer = document.createElement("div");
  volumeContainer.id = "volume-container";
  
  const volumeLabel = document.createElement("img");
  volumeLabel.src = "https://i.imgur.com/0BJYsXt.png";
  volumeLabel.alt = "Volume";
  volumeContainer.appendChild(volumeLabel);
  
    const volumeSliderContainer = document.createElement("div");
    volumeSliderContainer.classList.add("is-vertical");
    volumeSliderContainer.style.marginLeft = "23%";
    volumeSliderContainer.style.height = "126px";
  
    const volumeSlider = document.createElement("input");
    volumeSlider.type = "range";
    volumeSlider.id = "volumeSlider";
    volumeSlider.min = 0;
    volumeSlider.max = 9;
    volumeSlider.step = 1;
    volumeSlider.value = 1; // Initial volume
  
    volumeSliderContainer.appendChild(volumeSlider);
  
    const volumeDisplay = document.createElement("span");
    volumeDisplay.id = "volume-display";
    volumeDisplay.style.fontWeight = 'bold'; 
    volumeDisplay.style.display = 'none';
    volumeDisplay.textContent = "1";
  
    volumeContainer.appendChild(volumeSliderContainer);
    volumeContainer.appendChild(volumeDisplay);
  
    playerContainer.appendChild(volumeContainer);

  gameWindow_player.insertAdjacentElement("afterend", playerContainer);

  const audio = document.createElement("audio");
  audio.id = "audio";
  audio.src = playlist.getCurrentSong().audioLink;
  audio.volume = 1/9;
  // Event listeners
  playPauseButton.addEventListener("click", function () {
    if (audio.paused) {
      audio.play();
      playPauseButton.src = "https://i.imgur.com/oQbfTxw.png";
    } else {
      audio.pause();
      playPauseButton.src = "https://i.imgur.com/ttdoyfG.png";
    }
  });

  nextButton.addEventListener("click", function () {
    playlist.playNext();
    updateUI(playlist);
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
    playPauseButton.src = "https://i.imgur.com/oQbfTxw.png";
  });

  prevButton.addEventListener("click", function () {
    playlist.playPrevious();
    updateUI(playlist);
    audio.src = playlist.getCurrentSong().audioLink;
    audio.play();
    playPauseButton.src = "https://i.imgur.com/oQbfTxw.png";
  });
  
    audio.addEventListener("timeupdate", updateProgressBar);
    let isTransitioning = false; // Flag to prevent overlapping operations


      let currentVolume = 4; // Initial volume
  
    volumeSlider.addEventListener("input", function () {
      currentVolume = parseInt(volumeSlider.value, 10);
      updateVolumeDisplay();
      updateAudioVolume();
    });
  
    function updateVolumeDisplay() {
      volumeDisplay.textContent = currentVolume;
    }
  
     function updateAudioVolume() {
      const audio = document.getElementById("audio");
      audio.volume = currentVolume / 9; // Set volume between 0 and 1
    }
    progressBar.addEventListener("input", function () {
        const seekTime = (progressBar.value / 100) * audio.duration;
        audio.currentTime = seekTime;
      });
    
      audio.addEventListener("timeupdate", updateProgressBar);
      audio.addEventListener("ended", function () {
        playlist.playNext();
        updateUI(playlist);
        audio.src = playlist.getCurrentSong().audioLink;
        audio.play();
      });
    
      volumeSlider.addEventListener("input", function () {
        currentVolume = parseInt(volumeSlider.value, 10);
        updateVolumeDisplay();
        updateAudioVolume();
      });
  
      document.body.appendChild(audio);
      audio.play();
    
      updateUI(playlist);
  }
  function updateProgressBar() {
    const audio = document.getElementById("audio");
    const progressBar = document.getElementById("progress-bar");
    
    // Check if the duration is a valid number before updating the progress bar
    if (audio.duration && !isNaN(audio.duration) && isFinite(audio.duration)) {
      const progress = (audio.currentTime / audio.duration) * 100;
      if (progressBar) {
        progressBar.value = progress;
      }
    }
  }
  
  function updateVolumeDisplay() {
    const volumeDisplay = document.getElementById("volume-display");
    volumeDisplay.textContent = currentVolume;
  }
  
  function updateAudioVolume() {
    const audio = document.getElementById("audio");
    audio.volume = currentVolume / 9;
  }
  
  const style = document.createElement("style");
  style.textContent = `
  #player {
    border: none;
    display: flex;
    flex-direction: row;
    height: 191px;
    width: 90%;
    background: #1d253c;
    overflow: hidden;
  }
  
  #display-box {
    display: flex;
    align-items: center;
    width: 50%;
    padding: 15px;
  }
  
  #cover {
    width: 150px;
    height: 150px;
    margin: 0px 0px 0px 80px;
    border: 3px solid;
    border-image: linear-gradient(45deg, #004d80, #eef4f8) 1;
    border-radius: 0px;
    box-shadow: 0 10px 20px rgba(0,0,0,0.19), 0 6px 6px rgba(0,0,0,0.23);
    transform: rotate(-5deg);
    transition: all 0.3s ease;
}

#cover:hover {
    transform: rotate(0deg) scale(1.05);
    box-shadow: 0 14px 28px rgba(0,0,0,0.25), 0 10px 10px rgba(0,0,0,0.22);
}

  #controls-container {
    display: flex;
    flex-direction: column;
    align-items: center;
    width: 100%;
    padding-top: 15px;
  }
  
  #controls {
    display: flex;
    flex-direction: row;
    justify-content: center;
    width: 100%;
    margin-bottom: 10px;
  }
  
  #progress-bar-container {
    width: 100%;
    display: flex;
    flex-direction: column;
    align-items: center;
  }
  
  #progress-bar {
    width: 80%;
    margin: 10px auto;
    -webkit-appearance: none;
    appearance: none;
    height: 5px;
    background: #ddd;
    outline: none;
    border-radius: 5px;
  }

  #progress-bar::-webkit-progress-bar {
    background-color: #ddd;
    border-radius: 5px;
  }

  #progress-bar::-webkit-progress-value {
    background-color: #004d80;
    border-radius: 5px;
  }

  #progress-bar::-moz-progress-bar {
    background-color: #4CAF50;
    border-radius: 5px;
  }
  
  #song-info-container {
    width: 100%;
    display: flex;
    justify-content: center;
    margin-top: 10px;
  }
  
  #song-info {
    color: #ffffff;
    font-family: 'Agency FB', Arial, sans-serif;
    font-size: 24px;
    font-weight: bold;
    text-align: center;
    max-width: 80%;
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
    text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.5);
    letter-spacing: 0.5px;
  }
  
  @font-face {
    font-family: 'Agency FB';
    font-weight: normal;
    font-style: normal;
  }

  .is-vertical #volumeSlider {
    width: 16px;
    appearance: slider-vertical;
    -webkit-appearance: slider-vertical;
    background: #ddd;
    outline: none;
    opacity: 0.7;
    transition: opacity .2s;
  }

  .is-vertical #volumeSlider:hover {
    opacity: 1;
  }

  .is-vertical #volumeSlider::-webkit-slider-thumb {
    -webkit-appearance: none;
    appearance: none;
    width: 16px;
    height: 16px;
    background: #004d80;
    cursor: pointer;
    border-radius: 50%;
  }

  .is-vertical #volumeSlider::-moz-range-thumb {
    width: 16px;
    height: 16px;
    background: #4CAF50;
    cursor: pointer;
    border-radius: 50%;
  }

  #artist-scroll {
    width: 80%;
    overflow: hidden;
    white-space: nowrap;
    box-sizing: border-box;
    margin: 0 auto;
  }
`;

document.head.appendChild(style);

const gameWindow_player = document.getElementById("game_window");
//use this function directly or put it in an event listener to start the music on the press of a certain button
setupMusicPlayer();



campaignTrail_temp.achievements = {
  
}